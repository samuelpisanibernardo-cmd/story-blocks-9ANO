<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Breakout - Mobile Perfect</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            overflow: hidden;
            padding: 0;
            font-family: 'Segoe UI', sans-serif;
            touch-action: none;
            position: relative;
        }
        
        .game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.7);
            overflow: hidden;
        }
        
        canvas {
            display: block;
            background: #0a0e21;
            width: 100%;
            height: calc(100vh - 120px); /* Espaço para controles */
        }
        
        .screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(10,14,33,0.9);
            color: white;
            z-index: 20;
            text-align: center;
            padding: 20px;
        }
        
        .screen h1 { color: #ffcc00; font-size: 2.5rem; text-shadow: 0 0 10px #ffcc00; }
        .btn { 
            background: linear-gradient(to right, #ff8c00, #ffcc00); 
            color: #1a1a2e; 
            border: none; 
            padding: 12px 30px; 
            font-size: 1.3rem; 
            border-radius: 50px; 
            margin: 15px; 
            cursor: pointer; 
            font-weight: bold; 
            transition: all 0.3s; 
            width: 80%;
            max-width: 300px;
        }
        
        .btn:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(0,0,0,0.4); }
        
        .stats { 
            position: absolute; 
            top: 10px; 
            left: 10px; 
            color: white; 
            font-size: 1rem; 
            background: rgba(0,0,0,0.5); 
            padding: 5px 10px; 
            border-radius: 5px; 
            z-index: 10; 
        }
        
        .lives { 
            position: absolute; 
            top: 10px; 
            right: 10px; 
            display: flex; 
            gap: 5px; 
            z-index: 10; 
        }
        
        .life { 
            width: 20px; 
            height: 20px; 
            background: linear-gradient(45deg, #ff5252, #ff793f); 
            border-radius: 50%; 
            box-shadow: 0 0 6px rgba(255,82,82,0.7); 
        }
        
        .question-container {
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9); 
            padding: 20px; 
            border-radius: 10px; 
            border: 2px solid #ffcc00;
            box-shadow: 0 0 25px rgba(255,204,0,0.5); 
            z-index: 25; 
            display: none; 
            width: 90%; 
            max-width: 400px;
        }
        
        .question-text { 
            color: #ffcc00; 
            font-size: 1.3rem; 
            margin-bottom: 15px; 
            text-align: center;
        }
        
        .option { 
            padding: 10px 15px; 
            background: rgba(50,50,70,0.7); 
            border: 1px solid #444; 
            border-radius: 6px; 
            color: white; 
            margin: 6px 0; 
            cursor: pointer; 
            transition: all 0.2s;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .option:hover { 
            background: rgba(70,70,100,0.9); 
            transform: translateX(3px); 
        }
        
        .particles { 
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            pointer-events: none; 
            z-index: 1; 
        }
        
        .particle { 
            position: absolute; 
            width: 5px; 
            height: 5px; 
            border-radius: 50%; 
            pointer-events: none; 
        }
        
        .hidden { display: none !important; }
        
        .score-display { 
            font-size: 1.3rem; 
            color: #ffcc00; 
        }
        
        .bonus-indicator {
            position: absolute;
            top: 40px;
            right: 10px;
            color: white;
            font-size: 0.9rem;
            background: rgba(0,0,0,0.5);
            padding: 5px 10px;
            border-radius: 5px;
            z-index: 10;
            display: none;
        }
        
        /* Controles Mobile - otimizados para tela cheia */
        .mobile-controls {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 20px;
            z-index: 30;
            background: rgba(0,0,0,0.3);
        }
        
        .control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 204, 0, 0.3);
            border: 2px solid #ffcc00;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 28px;
            color: white;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            box-shadow: 0 0 10px rgba(255,204,0,0.3);
        }
        
        .control-btn:active {
            background: rgba(255, 204, 0, 0.6);
            transform: scale(0.9);
        }
        
        /* Ajustes para dispositivos móveis */
        @media (max-width: 768px) {
            .screen h1 { font-size: 2rem; }
            .btn { font-size: 1.2rem; }
            .stats { font-size: 0.9rem; }
            .question-text { font-size: 1.2rem; }
            .option { font-size: 1rem; padding: 8px 12px; }
            .life { width: 18px; height: 18px; }
            .bonus-indicator { font-size: 0.8rem; }
        }
        
        /* Para garantir que o jogo ocupe toda a tela em todos os dispositivos */
        html, body {
            height: 100%;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="stats">
            Pontuação: <span id="score">0</span> | Nível: <span id="level">1</span>
        </div>
        <div class="lives" id="lives-container"></div>
        <div class="bonus-indicator" id="bonusIndicator"></div>
        <div class="particles" id="particles"></div>
        <canvas id="gameCanvas"></canvas>

        <!-- Controles Mobile -->
        <div class="mobile-controls">
            <div class="control-btn" id="leftBtn">←</div>
            <div class="control-btn" id="rightBtn">→</div>
        </div>

        <div id="startScreen" class="screen">
            <h1>BRICK QUEST</h1>
            <p>Destrua os blocos e responda perguntas de história do 9º ano!</p>
            <div style="background: rgba(0,0,0,0.6); padding: 15px; border-radius: 10px; margin: 20px 0; max-width: 90%;">
                <h3 style="color: #ffcc00; margin-bottom: 10px;">Tipos de Blocos:</h3>
                <ul style="text-align: left; padding-left: 20px; margin-top: 10px; font-size: 0.9rem;">
                    <li style="margin: 6px 0;">Blocos normais - Destrua para ganhar pontos</li>
                    <li style="margin: 6px 0;">Blocos com "?" - Responda perguntas de história</li>
                    <li style="margin: 6px 0;">Blocos com "+" - Aumentam o tamanho da raquete</li>
                    <li style="margin: 6px 0;">Blocos com "♥" - Ganhe uma vida extra</li>
                    <li style="margin: 6px 0;">Blocos com "●" - Ganhe uma bola extra</li>
                </ul>
            </div>
            <button id="startBtn" class="btn">INICIAR JOGO</button>
        </div>

        <div id="gameOverScreen" class="screen hidden">
            <h1>GAME OVER</h1>
            <h2>Pontuação: <span id="finalScore">0</span></h2>
            <button id="restartBtn" class="btn">JOGAR NOVAMENTE</button>
        </div>

        <div id="questionContainer" class="question-container">
            <div class="question-text" id="questionText">Carregando...</div>
            <div class="options" id="optionsContainer"></div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Configurar canvas para ocupar toda a altura disponível
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight - 100; // Subtrair altura dos controles
        }
        
        // Inicializar canvas
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // PADDLE — com movimentação balanceada
        const paddle = {
            x: canvas.width / 2 - 60,
            y: canvas.height - 25,
            width: 120,
            height: 15,
            speed: 15,
            targetX: canvas.width / 2 - 60,
            velocity: 0,
            glow: 0,
            glowDirection: 1
        };

        // BALLS — agora pode ter múltiplas bolas
        let balls = [{
            x: canvas.width / 2,
            y: canvas.height - 40,
            radius: 8,
            dx: 5 * (Math.random() > 0.5 ? 1 : -1),
            dy: -5
        }];

        let score = 0;
        let lives = 3;
        let level = 1;
        let gameRunning = false;
        let blocks = [];
        let particles = [];
        let rightPressed = false;
        let leftPressed = false;
        let paddleSizeBonus = false;
        let bonusTimer = null;

        // QUESTÕES DE HISTÓRIA DO 9º ANO
        const historyQuestions = [
            { question: "Durante a Primeira Guerra Mundial, qual foi o evento que desencadeou o conflito?", options: ["Assassinato do Arquiduque Francisco Ferdinando", "Invasão da Polônia pela Alemanha", "Bombardeio de Pearl Harbor", "Revolução Russa"], answer: 0 },
            { question: "Qual foi o principal objetivo do Plano Marshall após a Segunda Guerra Mundial?", options: ["Reconstruir a Europa Ocidental", "Financiar a União Soviética", "Criar a OTAN", "Desenvolver armas nucleares"], answer: 0 },
            { question: "O que foi a Guerra Fria?", options: ["Conflito ideológico entre EUA e URSS", "Guerra entre Inglaterra e Alemanha", "Conflito na península coreana", "Guerra civil na China"], answer: 0 },
            { question: "Qual foi o principal movimento de independência nas colônias portuguesas da África?", options: ["Descolonização", "Guerra dos Bôeres", "Revolução Sandinista", "Guerra do Vietnã"], answer: 0 },
            { question: "O que foi o Apartheid?", options: ["Política de segregação racial na África do Sul", "Guerra civil na Argélia", "Movimento de independência em Angola", "Conflito entre israelenses e palestinos"], answer: 0 },
            { question: "Qual foi o principal objetivo da Revolução Cubana liderada por Fidel Castro?", options: ["Derrubar a ditadura de Fulgêncio Batista", "Unificar Cuba e Porto Rico", "Expandir o comunismo na América", "Conquistar a independência da Espanha"], answer: 0 },
            { question: "O que foi o Muro de Berlim?", options: ["Divisão entre Alemanha Oriental e Ocidental", "Fronteira entre França e Alemanha", "Muro de proteção contra invasões", "Símbolo da Revolução Francesa"], answer: 0 },
            { question: "Qual foi o principal conflito entre árabes e judeus no Oriente Médio?", options: ["Questão Palestina", "Guerra do Iraque", "Guerra do Líbano", "Conflito no Iêmen"], answer: 0 }
        ];

        // DOM
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');
        const scoreDisplay = document.getElementById('score');
        const levelDisplay = document.getElementById('level');
        const livesContainer = document.getElementById('lives-container');
        const finalScoreDisplay = document.getElementById('finalScore');
        const questionContainer = document.getElementById('questionContainer');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const particlesContainer = document.getElementById('particles');
        const bonusIndicator = document.getElementById('bonusIndicator');
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');

        function init() {
            createBlocks();
            updateLivesDisplay();
            gameRunning = true;
            draw();
        }

        function createBlocks() {
            blocks = [];
            const rows = 3;
            const cols = 8;
            
            // Definir tipos de blocos
            const normalBlocks = 15;
            const questionBlocks = 3;
            const paddleBlocks = 2;
            const lifeBlocks = 2;
            const ballBlocks = 2;
            
            // Criar array com todos os tipos de blocos
            let blockTypes = [];
            for (let i = 0; i < normalBlocks; i++) blockTypes.push('normal');
            for (let i = 0; i < questionBlocks; i++) blockTypes.push('question');
            for (let i = 0; i < paddleBlocks; i++) blockTypes.push('paddle');
            for (let i = 0; i < lifeBlocks; i++) blockTypes.push('life');
            for (let i = 0; i < ballBlocks; i++) blockTypes.push('ball');
            
            // Embaralhar os tipos de blocos
            for (let i = blockTypes.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [blockTypes[i], blockTypes[j]] = [blockTypes[j], blockTypes[i]];
            }
            
            const blockSize = { width: (canvas.width / cols) - 10, height: 30 };
            let blockIndex = 0;
            
            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < cols; c++) {
                    if (blockIndex >= blockTypes.length) break;
                    
                    let type = blockTypes[blockIndex];
                    let color;
                    let symbol = '';
                    
                    switch(type) {
                        case 'question':
                            color = '#4A90E2'; // Azul
                            symbol = '?';
                            break;
                        case 'paddle':
                            color = '#50C878'; // Verde esmeralda
                            symbol = '+';
                            break;
                        case 'life':
                            color = '#FF6B6B'; // Vermelho coral
                            symbol = '♥';
                            break;
                        case 'ball':
                            color = '#FFD700'; // Dourado
                            symbol = '●';
                            break;
                        default:
                            color = ['#FF5252', '#FF4081', '#E040FB', '#7C4DFF', '#536DFE', '#448AFF', '#40C4FF', '#18FFFF', '#64FFDA', '#69F0AE', '#B2FF59', '#EEFF41'][Math.floor(Math.random() * 12)];
                    }
                    
                    blocks.push({
                        x: c * (blockSize.width + 10) + 5,
                        y: r * (blockSize.height + 10) + 50,
                        width: blockSize.width,
                        height: blockSize.height,
                        color: color,
                        destroyed: false,
                        type: type,
                        symbol: symbol
                    });
                    
                    blockIndex++;
                }
            }
        }

        function updateLivesDisplay() {
            livesContainer.innerHTML = '';
            for (let i = 0; i < lives; i++) {
                const life = document.createElement('div');
                life.className = 'life';
                livesContainer.appendChild(life);
            }
        }

        function showBonusMessage(message) {
            bonusIndicator.textContent = message;
            bonusIndicator.style.display = 'block';
            setTimeout(() => {
                bonusIndicator.style.display = 'none';
            }, 2000);
        }

        function resetPaddleSize() {
            paddle.width = 120;
            paddleSizeBonus = false;
            if (bonusTimer) clearTimeout(bonusTimer);
        }

        function createParticles(x, y, color, count = 8) {
            for (let i = 0; i < count; i++) {
                const p = {
                    x, y,
                    size: Math.random() * 4 + 2,
                    color: color,
                    dx: (Math.random() - 0.5) * 6,
                    dy: (Math.random() - 0.5) * 6,
                    alpha: 1
                };
                particles.push(p);
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Atualizar brilho da raquete
            paddle.glow += 0.05 * paddle.glowDirection;
            if (paddle.glow > 1) {
                paddle.glow = 1;
                paddle.glowDirection = -1;
            } else if (paddle.glow < 0.5) {
                paddle.glow = 0.5;
                paddle.glowDirection = 1;
            }

            // Paddle com animação aprimorada
            ctx.fillStyle = '#ffcc00';
            ctx.beginPath();
            ctx.roundRect(paddle.x, paddle.y, paddle.width, paddle.height, 8);
            ctx.fill();
            
            // Efeito de brilho
            ctx.shadowColor = `rgba(255, 204, 0, ${paddle.glow})`;
            ctx.shadowBlur = 15 + (paddle.glow * 10);
            ctx.fill();
            ctx.shadowBlur = 0;
            
            // Borda da raquete
            ctx.strokeStyle = `rgba(255, 255, 255, ${paddle.glow})`;
            ctx.lineWidth = 2;
            ctx.stroke();

            // Balls
            balls.forEach(ball => {
                ctx.beginPath();
                ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
                ctx.fillStyle = '#ffffff';
                ctx.fill();
                ctx.shadowColor = '#ffffff';
                ctx.shadowBlur = 15;
                ctx.fill();
                ctx.shadowBlur = 0;
            });

            // Blocks
            blocks.forEach(b => {
                if (!b.destroyed) {
                    ctx.fillStyle = b.color;
                    ctx.beginPath();
                    ctx.roundRect(b.x, b.y, b.width, b.height, 5);
                    ctx.fill();
                    
                    // Desenhar símbolo nos blocos especiais
                    if (b.symbol) {
                        ctx.fillStyle = 'white';
                        ctx.font = 'bold 20px Arial';
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText(b.symbol, b.x + b.width/2, b.y + b.height/2);
                    } else {
                        // Brilho para blocos normais
                        ctx.fillStyle = 'rgba(255,255,255,0.2)';
                        ctx.fillRect(b.x + 2, b.y + 2, b.width - 4, 5);
                    }
                }
            });

            // Particles
            particles.forEach((p, i) => {
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(${parseInt(p.color.slice(1,3),16)}, ${parseInt(p.color.slice(3,5),16)}, ${parseInt(p.color.slice(5,7),16)}, ${p.alpha})`;
                ctx.fill();
                p.x += p.dx; p.y += p.dy; p.size -= 0.08; p.alpha -= 0.02;
                if (p.size <= 0 || p.alpha <= 0) particles.splice(i, 1);
            });

            if (gameRunning) requestAnimationFrame(draw);
        }

        function movePaddle() {
            // Movimentação com velocidade reduzida
            if (rightPressed && paddle.x < canvas.width - paddle.width) {
                paddle.x += paddle.speed;
            } else if (leftPressed && paddle.x > 0) {
                paddle.x -= paddle.speed;
            }
        }

        function moveBalls() {
            balls.forEach((ball, index) => {
                ball.x += ball.dx;
                ball.y += ball.dy;

                // Walls
                if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) ball.dx *= -1;
                if (ball.y - ball.radius < 0) ball.dy *= -1;

                // PADDLE COLLISION — GARANTIDA 100%
                if (
                    ball.y + ball.radius >= paddle.y &&
                    ball.y + ball.radius <= paddle.y + paddle.height &&
                    ball.x >= paddle.x &&
                    ball.x <= paddle.x + paddle.width
                ) {
                    ball.dy = -Math.abs(ball.dy);
                    ball.dx = (ball.x - (paddle.x + paddle.width/2)) / (paddle.width/4);
                    createParticles(ball.x, ball.y, '#ffcc00', 12);
                }

                // Perde vida se a bola sair pela parte inferior
                if (ball.y + ball.radius > canvas.height) {
                    // Remover esta bola
                    balls.splice(index, 1);
                    
                    // Se não houver mais bolas, perder vida
                    if (balls.length === 0) {
                        lives--;
                        updateLivesDisplay();
                        if (lives <= 0) {
                            gameOver();
                        } else {
                            // Adicionar uma nova bola
                            balls.push({
                                x: canvas.width / 2,
                                y: canvas.height - 40,
                                radius: 8,
                                dx: 5 * (Math.random() > 0.5 ? 1 : -1),
                                dy: -5
                            });
                        }
                    }
                }
            });
        }

        function blockCollision() {
            balls.forEach(ball => {
                for (let i = 0; i < blocks.length; i++) {
                    const b = blocks[i];
                    if (b.destroyed) continue;

                    if (
                        ball.x + ball.radius > b.x &&
                        ball.x - ball.radius < b.x + b.width &&
                        ball.y + ball.radius > b.y &&
                        ball.y - ball.radius < b.y + b.height
                    ) {
                        // Colisão precisa
                        const left = Math.abs(ball.x + ball.radius - b.x);
                        const right = Math.abs(ball.x - ball.radius - (b.x + b.width));
                        const top = Math.abs(ball.y + ball.radius - b.y);
                        const bottom = Math.abs(ball.y - ball.radius - (b.y + b.height));

                        const min = Math.min(left, right, top, bottom);

                        if (min === left || min === right) ball.dx *= -1;
                        else ball.dy *= -1;

                        // Processar tipo de bloco
                        if (b.type === 'question') {
                            // Bloco de pergunta
                            showQuestion();
                        } else if (b.type === 'paddle') {
                            // Bloco de aumento de raquete
                            if (!paddleSizeBonus) {
                                paddle.width = 180;
                                paddleSizeBonus = true;
                                showBonusMessage("Raquete aumentada!");
                                
                                // Resetar após 10 segundos
                                if (bonusTimer) clearTimeout(bonusTimer);
                                bonusTimer = setTimeout(() => {
                                    resetPaddleSize();
                                    showBonusMessage("Raquete normalizada");
                                }, 10000);
                            }
                            score += 30;
                        } else if (b.type === 'life') {
                            // Bloco de vida extra
                            lives++;
                            updateLivesDisplay();
                            showBonusMessage("Vida extra!");
                            score += 50;
                        } else if (b.type === 'ball') {
                            // Bloco de bola extra
                            if (balls.length < 3) { // Limite máximo de 3 bolas
                                balls.push({
                                    x: ball.x,
                                    y: ball.y,
                                    radius: 8,
                                    dx: ball.dx * 0.8 + (Math.random() - 0.5) * 2,
                                    dy: -Math.abs(ball.dy) * 0.8
                                });
                                showBonusMessage("Bola extra!");
                            }
                            score += 40;
                        } else {
                            // Bloco normal
                            score += 10;
                        }

                        b.destroyed = true;
                        scoreDisplay.textContent = score;
                        createParticles(b.x + b.width/2, b.y + b.height/2, b.color, 15);

                        // Verificar se todos os blocos foram destruídos
                        if (blocks.every(b => b.destroyed)) {
                            levelUp();
                        }
                        break;
                    }
                }
            });
        }

        function levelUp() {
            level++;
            levelDisplay.textContent = level;
            createBlocks();
            balls = [{
                x: canvas.width / 2,
                y: canvas.height - 40,
                radius: 8,
                dx: 5 * (Math.random() > 0.5 ? 1 : -1),
                dy: -5
            }];
        }

        function showQuestion() {
            gameRunning = false;
            
            const q = historyQuestions[Math.floor(Math.random() * historyQuestions.length)];
            questionText.textContent = q.question;
            optionsContainer.innerHTML = '';
            
            q.options.forEach((opt, i) => {
                const btn = document.createElement('div');
                btn.className = 'option';
                btn.textContent = opt;
                btn.onclick = () => checkAnswer(i, q.answer);
                optionsContainer.appendChild(btn);
            });
            
            questionContainer.style.display = 'block';
        }

        function checkAnswer(selected, correct) {
            const options = optionsContainer.querySelectorAll('.option');
            options[selected].style.backgroundColor = selected === correct ? '#4CAF50' : '#f44336';
            
            if (selected !== correct) {
                options[correct].style.backgroundColor = '#4CAF50';
                lives--;
                updateLivesDisplay();
                showBonusMessage("Resposta incorreta! Perdeu uma vida.");
                
                if (lives <= 0) {
                    setTimeout(gameOver, 1500);
                    return;
                }
            } else {
                score += 50;
                scoreDisplay.textContent = score;
                showBonusMessage("Resposta correta! +50 pontos.");
            }
            
            options.forEach(o => o.style.pointerEvents = 'none');
            setTimeout(() => {
                questionContainer.style.display = 'none';
                gameRunning = true;
                draw();
            }, 2000);
        }

        function gameOver() {
            gameRunning = false;
            finalScoreDisplay.textContent = score;
            gameOverScreen.classList.remove('hidden');
            resetPaddleSize();
        }

        function resetGame() {
            score = 0;
            lives = 3;
            level = 1;
            balls = [{
                x: canvas.width / 2,
                y: canvas.height - 40,
                radius: 8,
                dx: 5 * (Math.random() > 0.5 ? 1 : -1),
                dy: -5
            }];
            scoreDisplay.textContent = score;
            levelDisplay.textContent = level;
            updateLivesDisplay();
            createBlocks();
            gameOverScreen.classList.add('hidden');
            resetPaddleSize();
            init();
        }

        // Controles Mobile
        leftBtn.addEventListener('touchstart', () => {
            leftPressed = true;
        });
        
        leftBtn.addEventListener('touchend', () => {
            leftPressed = false;
        });
        
        rightBtn.addEventListener('touchstart', () => {
            rightPressed = true;
        });
        
        rightBtn.addEventListener('touchend', () => {
            rightPressed = false;
        });

        // Controles Desktop
        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowRight') rightPressed = true;
            if (e.key === 'ArrowLeft') leftPressed = true;
        });

        document.addEventListener('keyup', e => {
            if (e.key === 'ArrowRight') rightPressed = false;
            if (e.key === 'ArrowLeft') leftPressed = false;
        });

        // Eventos
        startBtn.addEventListener('click', () => {
            startScreen.classList.add('hidden');
            init();
        });
        restartBtn.addEventListener('click', resetGame);

        // Loop principal
        function gameLoop() {
            if (gameRunning) {
                movePaddle();
                moveBalls();
                blockCollision();
            }
            requestAnimationFrame(gameLoop);
        }

        updateLivesDisplay();
        gameLoop();
    </script>
</body>
</html>